var FlipCard=function(){"use strict";const t={passiveEventOption:function(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("test",null,e),!!t&&{passive:!0}}catch(t){return!1}}(),isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints};class e{static updateTransformProperty(t,e){return function(t,e){let i={};t.style.transform&&(i=t.style.transform.trim().match(/.+?\(.+?\)/g).map(t=>t.trim().split(/[()]+/).filter(t=>t)).reduce((t,e)=>(t[e[0]]=e[1],t),{}));let s=e.trim().match(/.+?\(.+?\)/g).map(t=>t.trim().split(/[()]+/).filter(t=>t)).reduce((t,e)=>(t[e[0]]=e[1],t),{}),o=Object.assign({},i,s),r="";for(const t of Object.keys(o))r+=`${t}(${o[t]}) `;return r.slice(0,-1),t.style.transform=r,!0}(t,e)}}class i{static easeOutElastic(t,e,i,s){let o=1.70158,r=0,n=i;return 0==t?e:1==(t/=s)?e+i:(r||(r=.3*s),n<Math.abs(i)?(n=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*s-o)*(2*Math.PI)/r)+i+e)}}class s{constructor(t){this.card=t,this.animTime=1e3,this.xDown=!1,this.isMoving=!1,this.touchStartDeg=0,this.time=0,this.degGap=0,this.degStart=0,this.requestAnimationFrameID=0,this.touchstartHandler=this.touchstartHandler.bind(this),this.touchmoveHandler=this.touchmoveHandler.bind(this),this.touchendHandler=this.touchendHandler.bind(this)}touchstartHandler(t){this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.xDown=t.touches[0].clientX,this.touchStartDeg=this.card.deg}touchmoveHandler(t){if(!this.xDown||this.isMoving)return;this.isMoving=!0;const i=t.touches[0].clientX-this.xDown,s=this.touchStartDeg+i;e.updateTransformProperty(this.card.front,`rotateY(${s}deg)`),e.updateTransformProperty(this.card.back,`rotateY(${s+180}deg)`),this.card.deg=s,this.isMoving=!1}touchendHandler(t){this.xDown&&(this.xDown=null,0<=this.card.deg&&this.card.deg<90?this.degGap=-this.card.deg:90<=this.card.deg&&this.card.deg<180?this.degGap=180-this.card.deg:180<=this.card.deg&&this.card.deg<270?this.degGap=180-this.card.deg:this.degGap=360-this.card.deg,this.degStart=this.card.deg,this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(t=>this.animateReturnToPlank(t)))}animateReturnToPlank(t){if(t-this.time>this.animTime)return this.time=0,void(this.requestAnimationFrameID=0);const s=i.easeOutElastic(t-this.time,this.degStart,this.degGap,this.animTime);e.updateTransformProperty(this.card.front,`rotateY(${s}deg)`),e.updateTransformProperty(this.card.back,`rotateY(${s+180}deg)`),this.card.deg=s,this.requestAnimationFrameID=window.requestAnimationFrame(t=>this.animateReturnToPlank(t))}}class o{constructor(t){this.card=t,this.animTime=3e3,this.time=0,this.degGap=180,this.degStart=0,this.requestAnimationFrameID=0,this.mouseenterHandler=this.mouseenterHandler.bind(this),this.mouseleaveHandler=this.mouseleaveHandler.bind(this)}mouseenterHandler(t){this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.degStart=this.card.deg,this.degGap=180-this.card.deg,0!==this.degGap&&(this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(t=>this.animateFlip(t)))}mouseleaveHandler(t){this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.degStart=this.card.deg,this.degGap=-this.card.deg,0!==this.degGap&&(this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(t=>this.animateFlip(t)))}animateFlip(t){t-this.time>this.animTime&&(this.time=0,this.requestAnimationFrameID=0);const s=i.easeOutElastic(t-this.time,this.degStart,this.degGap,this.animTime);e.updateTransformProperty(this.card.front,`rotateY(${s}deg)`),e.updateTransformProperty(this.card.back,`rotateY(${s+180}deg)`),this.card.deg=s,this.requestAnimationFrameID=window.requestAnimationFrame(t=>this.animateFlip(t))}}class r{constructor(t,e,i){this.container=t,this.front=e,this.back=i,this.touchSupport=null,this.mouseSupport=null,this._deg=0}get deg(){return this._deg}set deg(t){this._deg=(t%360+360)%360}addTouchSupport(){!this.touchSupport&&t.isTouchDevice&&(this.touchSupport=new s(this),this.container.addEventListener("touchstart",this.touchSupport.touchstartHandler,t.passiveEventOption),this.container.addEventListener("touchmove",this.touchSupport.touchmoveHandler,t.passiveEventOption),this.container.addEventListener("touchend",this.touchSupport.touchendHandler,t.passiveEventOption))}removeTouchSupport(){this.touchSupport&&(this.container.removeEventListener("touchstart",this.touchSupport.touchstartHandler,t.passiveEventOption),this.container.removeEventListener("touchmove",this.touchSupport.touchmoveHandler,t.passiveEventOption),this.container.removeEventListener("touchend",this.touchSupport.touchendHandler,t.passiveEventOption),this.touchSupport=null)}addMouseSupport(){this.mouseSupport||t.isTouchDevice||(this.mouseSupport=new o(this),this.container.addEventListener("mouseenter",this.mouseSupport.mouseenterHandler,t.passiveEventOption),this.container.addEventListener("mouseleave",this.mouseSupport.mouseleaveHandler,t.passiveEventOption))}removeMouseSupport(){this.mouseSupport&&(this.container.removeEventListener("mouseenter",this.mouseSupport.mouseenterHandler,t.passiveEventOption),this.container.removeEventListener("mouseleave",this.mouseSupport.mouseleaveHandler,t.passiveEventOption),this.mouseSupport=null)}}const n={container:".flip-card",front:".flip-card-front",back:".flip-card-back",addCssBasic:!0,addCssPositioning:!1,addTouchSupport:!0,addMouseSupport:!0,domObjects:{cardList:[]}};return class{constructor(t={}){this.options=Object.assign({},n,t),this.updateDomObjects(),this.options.addCssBasic&&function(t){for(const i of t.domObjects.cardList)i.container.style.perspective="400px",i.front.style.backfaceVisibility="hidden",i.back.style.backfaceVisibility="hidden",e.updateTransformProperty(i.front,"rotateY(0)"),e.updateTransformProperty(i.back,"rotateY(180deg)")}(this.options),this.options.addCssPositioning&&function(t){for(const i of t.domObjects.cardList){i.container.style.position="relative";let t=i.front.getBoundingClientRect(),s=i.back.getBoundingClientRect(),o=Math.max(t.width,s.width),r=Math.max(t.height,s.height);i.container.style.width=o+"px",i.container.style.height=r+"px",i.front.style.position="absolute",i.front.style.top="50%",i.front.style.left="50%",i.front.style.transformOrigin="left center",e.updateTransformProperty(i.front,"translate(-50%, -50%)"),i.back.style.position="absolute",i.back.style.top="50%",i.back.style.left="50%",i.back.style.transformOrigin="left center",e.updateTransformProperty(i.back,"translate(-50%, -50%)")}}(this.options),this.options.addTouchSupport&&this.touchSupport.add(),this.options.addMouseSupport&&this.mouseSupport.add()}updateDomObjects(){if(0===this.options.domObjects.cardList.length){let t=document.querySelectorAll(this.options.container);for(const e of t){const t=e.querySelector(this.options.front),i=e.querySelector(this.options.back);this.options.domObjects.cardList.push(new r(e,t,i))}}else console.error("ToDo! Not implemented yet, if there are already objects. updateDomObjects()");return this}get touchSupport(){const t=this;return{add(){for(const e of t.options.domObjects.cardList)e.addTouchSupport();return t},remove(){for(const e of t.options.domObjects.cardList)e.removeTouchSupport();return t}}}get mouseSupport(){const t=this;return{add(){for(const e of t.options.domObjects.cardList)e.addMouseSupport();return t},remove(){for(const e of t.options.domObjects.cardList)e.removeMouseSupport();return t}}}}}();
//# sourceMappingURL=flipcard.min.js.map
