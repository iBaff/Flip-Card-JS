var FlipCard=function(){"use strict";!function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),s=a.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=s:(i=o=s,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),n={passiveEventOption:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("test",null,e),!!t&&{passive:!0}}catch(t){return!1}}(),isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints},r=function(){function n(){t(this,n)}return e(n,null,[{key:"updateTransformProperty",value:function(t,e){return function(t,e){var n={};t.style.transform&&(n=t.style.transform.trim().match(/.+?\(.+?\)/g).map(function(t){return t.trim().split(/[()]+/).filter(function(t){return t})}).reduce(function(t,e){return t[e[0]]=e[1],t},{}));var r=e.trim().match(/.+?\(.+?\)/g).map(function(t){return t.trim().split(/[()]+/).filter(function(t){return t})}).reduce(function(t,e){return t[e[0]]=e[1],t},{}),i=Object.assign({},n,r),o="",a=!0,s=!1,u=void 0;try{for(var h,c=Object.keys(i)[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var d=h.value;o+=d+"("+i[d]+") "}}catch(t){s=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}return o.slice(0,-1),t.style.transform=o,!0}(t,e)}}]),n}(),i=function(){function n(){t(this,n)}return e(n,null,[{key:"easeOutElastic",value:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0==t?e:1==(t/=r)?e+n:(o||(o=.3*r),a<Math.abs(n)?(a=n,i=o/4):i=o/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+n+e)}}]),n}(),o=function(){function n(e){t(this,n),this.card=e,this.animTime=1e3,this.xDown=!1,this.isMoving=!1,this.touchStartDeg=0,this.time=0,this.degGap=0,this.degStart=0,this.requestAnimationFrameID=0,this.touchstartHandler=this.touchstartHandler.bind(this),this.touchmoveHandler=this.touchmoveHandler.bind(this),this.touchendHandler=this.touchendHandler.bind(this)}return e(n,[{key:"touchstartHandler",value:function(t){this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.xDown=t.touches[0].clientX,this.touchStartDeg=this.card.deg}},{key:"touchmoveHandler",value:function(t){if(this.xDown&&!this.isMoving){this.isMoving=!0;var e=t.touches[0].clientX-this.xDown,n=this.touchStartDeg+e;r.updateTransformProperty(this.card.front,"rotateY("+n+"deg)"),r.updateTransformProperty(this.card.back,"rotateY("+(n+180)+"deg)"),this.card.deg=n,this.isMoving=!1}}},{key:"touchendHandler",value:function(t){var e=this;this.xDown&&(this.xDown=null,0<=this.card.deg&&this.card.deg<90?this.degGap=-this.card.deg:90<=this.card.deg&&this.card.deg<180?this.degGap=180-this.card.deg:180<=this.card.deg&&this.card.deg<270?this.degGap=180-this.card.deg:this.degGap=360-this.card.deg,this.degStart=this.card.deg,this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(function(t){return e.animateReturnToPlank(t)}))}},{key:"animateReturnToPlank",value:function(t){var e=this;if(t-this.time>this.animTime)return this.time=0,void(this.requestAnimationFrameID=0);var n=i.easeOutElastic(t-this.time,this.degStart,this.degGap,this.animTime);r.updateTransformProperty(this.card.front,"rotateY("+n+"deg)"),r.updateTransformProperty(this.card.back,"rotateY("+(n+180)+"deg)"),this.card.deg=n,this.requestAnimationFrameID=window.requestAnimationFrame(function(t){return e.animateReturnToPlank(t)})}}]),n}(),a=function(){function n(e){t(this,n),this.card=e,this.animTime=3e3,this.time=0,this.degGap=180,this.degStart=0,this.requestAnimationFrameID=0,this.mouseenterHandler=this.mouseenterHandler.bind(this),this.mouseleaveHandler=this.mouseleaveHandler.bind(this)}return e(n,[{key:"mouseenterHandler",value:function(t){var e=this;this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.degStart=this.card.deg,this.degGap=180-this.card.deg,0!==this.degGap&&(this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(function(t){return e.animateFlip(t)}))}},{key:"mouseleaveHandler",value:function(t){var e=this;this.requestAnimationFrameID&&window.cancelAnimationFrame(this.requestAnimationFrameID),this.degStart=this.card.deg,this.degGap=-this.card.deg,0!==this.degGap&&(this.time=performance.now(),this.requestAnimationFrameID=window.requestAnimationFrame(function(t){return e.animateFlip(t)}))}},{key:"animateFlip",value:function(t){var e=this;t-this.time>this.animTime&&(this.time=0,this.requestAnimationFrameID=0);var n=i.easeOutElastic(t-this.time,this.degStart,this.degGap,this.animTime);r.updateTransformProperty(this.card.front,"rotateY("+n+"deg)"),r.updateTransformProperty(this.card.back,"rotateY("+(n+180)+"deg)"),this.card.deg=n,this.requestAnimationFrameID=window.requestAnimationFrame(function(t){return e.animateFlip(t)})}}]),n}(),s=function(){function r(e,n,i){t(this,r),this.container=e,this.front=n,this.back=i,this.touchSupport=null,this.mouseSupport=null,this._deg=0}return e(r,[{key:"addTouchSupport",value:function(){!this.touchSupport&&n.isTouchDevice&&(this.touchSupport=new o(this),this.container.addEventListener("touchstart",this.touchSupport.touchstartHandler,n.passiveEventOption),this.container.addEventListener("touchmove",this.touchSupport.touchmoveHandler,n.passiveEventOption),this.container.addEventListener("touchend",this.touchSupport.touchendHandler,n.passiveEventOption))}},{key:"removeTouchSupport",value:function(){this.touchSupport&&(this.container.removeEventListener("touchstart",this.touchSupport.touchstartHandler,n.passiveEventOption),this.container.removeEventListener("touchmove",this.touchSupport.touchmoveHandler,n.passiveEventOption),this.container.removeEventListener("touchend",this.touchSupport.touchendHandler,n.passiveEventOption),this.touchSupport=null)}},{key:"addMouseSupport",value:function(){this.mouseSupport||n.isTouchDevice||(this.mouseSupport=new a(this),this.container.addEventListener("mouseenter",this.mouseSupport.mouseenterHandler,n.passiveEventOption),this.container.addEventListener("mouseleave",this.mouseSupport.mouseleaveHandler,n.passiveEventOption))}},{key:"removeMouseSupport",value:function(){this.mouseSupport&&(this.container.removeEventListener("mouseenter",this.mouseSupport.mouseenterHandler,n.passiveEventOption),this.container.removeEventListener("mouseleave",this.mouseSupport.mouseleaveHandler,n.passiveEventOption),this.mouseSupport=null)}},{key:"deg",get:function(){return this._deg},set:function(t){this._deg=(t%360+360)%360}}]),r}(),u={container:".flip-card",front:".flip-card-front",back:".flip-card-back",addCssBasic:!0,addCssPositioning:!1,addTouchSupport:!0,addMouseSupport:!0,domObjects:{cardList:[]}};return function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,n),this.options=Object.assign({},u,e),this.updateDomObjects(),this.options.addCssBasic&&function(t){var e=!0,n=!1,i=void 0;try{for(var o,a=t.domObjects.cardList[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;s.container.style.perspective="400px",s.front.style.backfaceVisibility="hidden",s.back.style.backfaceVisibility="hidden",r.updateTransformProperty(s.front,"rotateY(0)"),r.updateTransformProperty(s.back,"rotateY(180deg)")}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}(this.options),this.options.addCssPositioning&&function(t){var e=!0,n=!1,i=void 0;try{for(var o,a=t.domObjects.cardList[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;s.container.style.position="relative";var u=s.front.getBoundingClientRect(),h=s.back.getBoundingClientRect(),c=Math.max(u.width,h.width),d=Math.max(u.height,h.height);s.container.style.width=c+"px",s.container.style.height=d+"px",s.front.style.position="absolute",s.front.style.top="50%",s.front.style.left="50%",s.front.style.transformOrigin="left center",r.updateTransformProperty(s.front,"translate(-50%, -50%)"),s.back.style.position="absolute",s.back.style.top="50%",s.back.style.left="50%",s.back.style.transformOrigin="left center",r.updateTransformProperty(s.back,"translate(-50%, -50%)")}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}}(this.options),this.options.addTouchSupport&&this.touchSupport.add(),this.options.addMouseSupport&&this.mouseSupport.add()}return e(n,[{key:"updateDomObjects",value:function(){if(0===this.options.domObjects.cardList.length){var t=document.querySelectorAll(this.options.container),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,u=a.querySelector(this.options.front),h=a.querySelector(this.options.back);this.options.domObjects.cardList.push(new s(a,u,h))}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}else console.error("ToDo! Not implemented yet, if there are already objects. updateDomObjects()");return this}},{key:"touchSupport",get:function(){var t=this;return{add:function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.options.domObjects.cardList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addTouchSupport()}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t},remove:function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.options.domObjects.cardList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.removeTouchSupport()}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t}}}},{key:"mouseSupport",get:function(){var t=this;return{add:function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.options.domObjects.cardList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addMouseSupport()}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t},remove:function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.options.domObjects.cardList[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.removeMouseSupport()}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return t}}}}]),n}()}();
//# sourceMappingURL=flipcard-oldBrowserSupport.min.js.map
